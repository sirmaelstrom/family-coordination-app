# Development overrides - loaded automatically with docker-compose up
services:
  postgres:
    ports:
      - "5432:5432"  # Expose for local tooling (pgAdmin, etc.)
    # Uses bind mount from main compose file (./data/postgres)

  app:
    environment:
      # Use env var from .env file, defaults to Production
      ASPNETCORE_ENVIRONMENT: ${ASPNETCORE_ENVIRONMENT:-Production}
      ASPNETCORE_FORWARDEDHEADERS_ENABLED: "true"
    ports:
      - "8080:8080"  # Direct access for debugging
    # Uses bind mounts from main compose file

  nginx:
    # Use self-signed certs for local HTTPS testing
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/family-app.conf:/etc/nginx/conf.d/default.conf:ro
      - ./nginx/certs:/etc/nginx/certs:ro
