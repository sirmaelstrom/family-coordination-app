html, body {
    font-family: 'Inter', 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
    height: 100%;
    background-color: var(--mud-palette-background);
}

/* Dark mode background override */
.mud-theme-dark, .mud-theme-dark body {
    background-color: #121212;
}

h1:focus {
    outline: none;
}

/* Full height layout chain */
.mud-layout {
    min-height: 100vh !important;
    display: flex !important;
    flex-direction: column !important;
    background-color: var(--mud-palette-background) !important;
}

/* Fix nav icon centering in mini drawer */
.mud-drawer-mini .mud-nav-link {
    justify-content: center !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
}

.mud-drawer-mini .mud-nav-link-icon {
    margin-right: 0 !important;
}

/* Simple smooth transitions */
.mud-drawer {
    transition: width 0.2s ease-out !important;
}

/* Main content fills remaining space */
.mud-main-content {
    transition: padding-left 0.2s ease-out !important;
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    background-color: var(--mud-palette-background) !important;
}

/* Content area grows */
.content-wrapper {
    flex: 1;
    padding: 1rem;
}

/* Footer at bottom - no gap */
.app-footer {
    flex-shrink: 0;
    border-top: 1px solid var(--mud-palette-divider, rgba(255,255,255,0.12));
}

/* Nav links */
.mud-nav-link {
    transition: background-color 0.15s ease-out !important;
}

/* Card hover */
.mud-card {
    transition: box-shadow 0.15s ease-out !important;
}

/* Drawer overlay */
.mud-overlay {
    transition: opacity 0.2s ease-out !important;
}

/* Hide Blazor error UI */
#blazor-error-ui {
    display: none !important;
}

/* Mobile dialog fixes */
@media (max-width: 600px) {
    /* Make dialogs fullscreen on mobile */
    .mud-dialog {
        margin: 0 !important;
        max-height: 100vh !important;
        max-height: 100dvh !important; /* Dynamic viewport height for mobile */
        max-width: 100vw !important;
        width: 100vw !important;
        height: 100vh !important;
        height: 100dvh !important;
        border-radius: 0 !important;
        display: flex !important;
        flex-direction: column !important;
    }
    
    .mud-dialog-container {
        align-items: stretch !important;
    }
    
    /* Dialog content scrolls, actions stay fixed */
    .mud-dialog-content {
        flex: 1 1 auto !important;
        overflow-y: auto !important;
        min-height: 0 !important;
    }
    
    /* Actions always visible at bottom */
    .mud-dialog-actions {
        flex-shrink: 0 !important;
        padding: 12px 16px !important;
        border-top: 1px solid rgba(255,255,255,0.12) !important;
        background: inherit !important;
    }
    
    /* Title stays at top */
    .mud-dialog-title {
        flex-shrink: 0 !important;
    }
    
    /* Fix dropdown/select positioning on mobile */
    .mud-popover {
        position: fixed !important;
    }
    
    .mud-list {
        max-height: 40vh !important;
        overflow-y: auto !important;
    }
}

/* FAB positioning - account for bottom nav on mobile */
.page-fab {
    position: fixed !important;
    bottom: 24px;
    right: 24px;
    z-index: 1050;
}

@media (max-width: 960px) {
    .page-fab {
        bottom: 80px !important; /* Above bottom nav */
    }
}

/* Touch device improvements for shopping list */
@media (pointer: coarse) {
    /* Allow vertical scrolling while still supporting drag-drop via handle */
    .mud-drop-zone {
        touch-action: pan-y;
    }

    /* Hide drag handle on touch devices - reordering via Edit menu instead */
    .shopping-list-item .drag-handle {
        display: none;
    }

    /* Disable accidental drag on item content */
    .mud-drop-zone .shopping-list-item {
        -webkit-user-drag: none;
        user-drag: none;
    }

    /* Improve tap targets for touch */
    .shopping-list-item {
        min-height: 56px;
    }
}

/* Show drag handles on hover for mouse/trackpad users */
@media (hover: hover) and (pointer: fine) {
    .shopping-list-item .drag-handle {
        opacity: 0.4;
        transition: opacity 0.2s;
    }

    .shopping-list-item:hover .drag-handle {
        opacity: 1;
        cursor: grab;
    }
}
