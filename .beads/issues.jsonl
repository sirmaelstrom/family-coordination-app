{"id":"family-coordination-app-5ca","title":"Security Audit 2026-02 — Family Coordination App","status":"closed","priority":1,"issue_type":"epic","owner":"jmheath@gmail.com","created_at":"2026-02-08T14:04:31.813247811-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-08T18:17:36.081671391-06:00","closed_at":"2026-02-08T18:17:36.081671391-06:00","close_reason":"5 of 6 children closed. Remaining P3 item (5ca.6) tracked independently."}
{"id":"family-coordination-app-5ca.1","title":"ForwardedHeaders trusts all proxies — IP spoofing risk","description":"Program.cs:226-227 — ForwardedHeadersOptions configured with KnownProxies.Clear() and KnownNetworks.Clear(), trusting ALL X-Forwarded-* headers. Attacker can forge X-Forwarded-For to appear as any IP. Fix: Whitelist only nginx container's Docker network IP (e.g., 172.18.0.0/16).","status":"closed","priority":1,"issue_type":"bug","owner":"jmheath@gmail.com","created_at":"2026-02-08T14:04:36.263312208-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-08T17:09:20.645024504-06:00","closed_at":"2026-02-08T17:09:20.645024504-06:00","close_reason":"Replaced KnownProxies/KnownNetworks.Clear() with explicit Docker bridge (172.16.0.0/12) and loopback (127.0.0.0/8) ranges via KnownIPNetworks","labels":["p1","security"],"dependencies":[{"issue_id":"family-coordination-app-5ca.1","depends_on_id":"family-coordination-app-5ca","type":"parent-child","created_at":"2026-02-08T14:04:36.264774291-06:00","created_by":"sirmaelstrom"}]}
{"id":"family-coordination-app-5ca.2","title":"Migrate OAuth secrets from .env to a secrets manager","description":"docker-compose.yml:32-34 — Google OAuth client secret passed via environment variable from .env file. a secrets manager is already set up on homeserver with bws CLI. Fix: Wire BSM into deploy.sh to inject secrets at runtime instead of storing in .env.","status":"closed","priority":1,"issue_type":"task","owner":"jmheath@gmail.com","created_at":"2026-02-08T14:04:37.698730662-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-08T17:09:40.635554991-06:00","closed_at":"2026-02-08T17:09:40.635554991-06:00","close_reason":"Already implemented: deploy.yml generates .env from a secrets manager via bws CLI at deploy time (lines 63-80). Secrets not stored in git.","labels":["p1","security"],"dependencies":[{"issue_id":"family-coordination-app-5ca.2","depends_on_id":"family-coordination-app-5ca","type":"parent-child","created_at":"2026-02-08T14:04:37.700150487-06:00","created_by":"sirmaelstrom"}]}
{"id":"family-coordination-app-5ca.3","title":"Add secrets scanning to CI/pre-commit hooks","description":"No git-secrets, truffleHog, or gitleaks configured. Committed secrets go undetected. Fix: Add gitleaks pre-commit hook and CI check.","status":"closed","priority":1,"issue_type":"task","owner":"jmheath@gmail.com","created_at":"2026-02-08T14:04:39.811582155-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-08T17:10:06.811641389-06:00","closed_at":"2026-02-08T17:10:06.811641389-06:00","close_reason":"Added gitleaks-action to CI pipeline as secrets-scan job. Scans full git history on every push/PR.","labels":["cross-cutting","p1","security"],"dependencies":[{"issue_id":"family-coordination-app-5ca.3","depends_on_id":"family-coordination-app-5ca","type":"parent-child","created_at":"2026-02-08T14:04:39.812985985-06:00","created_by":"sirmaelstrom"}]}
{"id":"family-coordination-app-5ca.4","title":"Open redirect vulnerability in returnUrl validation","description":"Program.cs:325-330 — returnUrl validation allows protocol-relative URLs (//evil.com). Phishing via OAuth callback redirect to attacker site. Fix: Reject URLs starting with // or containing ://.","status":"closed","priority":2,"issue_type":"bug","owner":"jmheath@gmail.com","created_at":"2026-02-08T14:04:41.55589465-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-08T17:09:27.854091408-06:00","closed_at":"2026-02-08T17:09:27.854091408-06:00","close_reason":"Strengthened returnUrl validation: trim whitespace, require leading /, reject protocol-relative (//), backslash (/\\), and scheme (://) patterns","labels":["p2","security"],"dependencies":[{"issue_id":"family-coordination-app-5ca.4","depends_on_id":"family-coordination-app-5ca","type":"parent-child","created_at":"2026-02-08T14:04:41.557129122-06:00","created_by":"sirmaelstrom"}]}
{"id":"family-coordination-app-5ca.5","title":"Data protection keys stored unencrypted when cert missing","description":"Program.cs:35-53 — If DATAPROTECTION_CERT env var is not set, encryption keys stored in plaintext on disk. Session cookie decryption keys exposed on filesystem. Fix: Fail startup if DATAPROTECTION_CERT is missing in production.","status":"closed","priority":2,"issue_type":"bug","owner":"jmheath@gmail.com","created_at":"2026-02-08T14:04:42.593068661-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-08T17:09:34.012003069-06:00","closed_at":"2026-02-08T17:09:34.012003069-06:00","close_reason":"Production startup now throws InvalidOperationException when DATAPROTECTION_CERT is missing. Development mode still allows unprotected keys.","labels":["p2","security"],"dependencies":[{"issue_id":"family-coordination-app-5ca.5","depends_on_id":"family-coordination-app-5ca","type":"parent-child","created_at":"2026-02-08T14:04:42.594344755-06:00","created_by":"sirmaelstrom"}]}
{"id":"family-coordination-app-5ca.6","title":"Move Postgres password to Docker secrets","description":"docker-compose.yml:8 — Database password in plaintext .env file. Fix: Use Docker secrets for POSTGRES_PASSWORD or inject via a secrets manager.","status":"closed","priority":3,"issue_type":"task","owner":"jmheath@gmail.com","created_at":"2026-02-08T14:04:43.584594039-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-08T18:20:45.008570172-06:00","closed_at":"2026-02-08T18:20:45.008570172-06:00","close_reason":"Moved Postgres password from .env environment variable to Docker Compose file-based secret. Password mounted at /run/secrets/postgres_password, read by Program.cs at startup. No longer visible in docker inspect.","labels":["p3","security"],"dependencies":[{"issue_id":"family-coordination-app-5ca.6","depends_on_id":"family-coordination-app-5ca","type":"parent-child","created_at":"2026-02-08T14:04:43.585859008-06:00","created_by":"sirmaelstrom"}]}
{"id":"family-coordination-app-66g","title":"Output path guardrails - consolidate to ~/data/outputs/","description":"Cron scripts and Observatory were writing outputs to wrong locations (~/clawd/data/ instead of ~/data/outputs/). Fixed immediate issues but need full audit:\n\n1. Cron scripts fixed: cron-daily-research, cron-research-backlog, champaign-daily-news, champaign-weekly-events\n2. Observatory CLAUDE.md updated with explicit path guidance\n3. Still need to audit: spawn-agent output paths, any remaining scripts\n\nSee ~/data/outputs/projects/2026-02-06-archive-feature-design.md for related cleanup work.","status":"closed","priority":1,"issue_type":"task","owner":"jmheath@gmail.com","created_at":"2026-02-06T01:38:54.953567925-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-06T01:45:20.905532042-06:00","closed_at":"2026-02-06T01:45:20.905532042-06:00","close_reason":"Fixed output path consolidation: updated all cron scripts to write to ~/data/outputs/, moved misplaced files, archived old OpenClaw state, updated Observatory CLAUDE.md with explicit path guidance","labels":["infra"]}
{"id":"family-coordination-app-uhz","title":"Cross-family recipe sharing","description":"Allow users to share recipes between households via shareable links. See ~/data/outputs/projects/2026-02-06-cross-family-recipe-sharing.md for full design.","status":"open","priority":2,"issue_type":"task","owner":"jmheath@gmail.com","created_at":"2026-02-06T01:38:47.009771096-06:00","created_by":"sirmaelstrom","updated_at":"2026-02-06T01:38:47.009771096-06:00","labels":["design-doc","feature"]}
