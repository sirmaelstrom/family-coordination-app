---
phase: 06-recipe-import
plan: 06
type: execute
wave: 4
depends_on: [06-04, 06-05]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Import dialog opens from Recipes page"
    - "Import successfully extracts recipe from AllRecipes URL"
    - "Imported recipe appears in recipe list with source indicator"
    - "Import errors show clear message with manual entry option"
  artifacts: []
  key_links: []
---

<objective>
Human verification of recipe import workflow: test import from real recipe URLs, verify error handling, and confirm UI indicators.

Purpose: Validate the complete import flow works end-to-end with real recipe websites.
Output: Verified working recipe import feature.
</objective>

<execution_context>
@/home/sirm/.claude/get-shit-done/workflows/execute-plan.md
@/home/sirm/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-recipe-import/06-04-SUMMARY.md
@.planning/phases/06-recipe-import/06-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Recipe import feature with URL validation, JSON-LD extraction, and UI integration</what-built>
  <how-to-verify>
1. Start the application:
   ```bash
   cd src/FamilyCoordinationApp
   dotnet run
   ```

2. Navigate to Recipes page (should see "Import from URL" button next to "New Recipe")

3. Test successful import:
   - Click "Import from URL" button
   - Paste a recipe URL (try one of these):
     - https://www.allrecipes.com/recipe/21014/good-old-fashioned-pancakes/
     - https://www.foodnetwork.com/recipes/food-network-kitchen/chicken-parmesan-recipe-1929824
   - Click Import
   - Expected: Loading spinner, then success message and redirect to edit page
   - Verify: Recipe name, ingredients, and instructions populated
   - Verify: Source URL field populated

4. Test error handling:
   - Try importing invalid URL: "not-a-url"
     - Expected: Error message about invalid URL format
   - Try importing non-recipe page: "https://google.com"
     - Expected: Error message with "Add Recipe Manually" button

5. Test source indicator:
   - Save the imported recipe (click Save on edit page)
   - Return to Recipes list
   - Verify: Imported recipe shows cloud download icon
   - Click recipe to expand
   - Verify: "View Original Recipe" link appears
   - Click link - should open original page in new tab

6. Test SSRF protection:
   - Try importing: "http://localhost:5000/test"
     - Expected: Error about internal networks not allowed
   - Try importing: "http://192.168.1.1/test"
     - Expected: Same error

Expected outcomes:
- Import dialog opens with URL input
- Valid recipe URLs import successfully (name, ingredients, instructions extracted)
- Invalid/non-recipe URLs show clear error messages
- Imported recipes show source indicator in list
- Expanded view shows clickable source link
- SSRF protection blocks internal URLs
  </how-to-verify>
  <resume-signal>Type "approved" if import works as expected, or describe specific issues</resume-signal>
</task>

</tasks>

<verification>
Human verification checkpoint - no automated verification for this plan.
</verification>

<success_criteria>
- Import dialog opens from Recipes page
- Recipe import works for at least one popular recipe site (AllRecipes or Food Network)
- Imported recipe has correct name, ingredients, and instructions
- Import errors show clear messages with manual entry option
- Source indicator appears on imported recipe cards
- Source link opens original page in new tab
- SSRF protection blocks internal URLs
</success_criteria>

<output>
After completion, create `.planning/phases/06-recipe-import/06-06-SUMMARY.md`
</output>
