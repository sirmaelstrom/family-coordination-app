---
phase: 07-mobile-ux-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - wwwroot/manifest.json
  - wwwroot/service-worker.js
  - wwwroot/icons/icon-192.png
  - wwwroot/icons/icon-512.png
  - Components/App.razor
autonomous: true

must_haves:
  truths:
    - "manifest.json exists with correct app metadata"
    - "service-worker.js caches static assets"
    - "PWA icons exist in wwwroot/icons/"
    - "manifest is linked in App.razor head"
  artifacts:
    - wwwroot/manifest.json
    - wwwroot/service-worker.js
  key_links: []
---

<objective>
Create PWA infrastructure: manifest.json, service worker, and app icons for "Add to Home Screen" support.

Purpose: Enable the app to be installed on mobile devices as a PWA.
Output: PWA-ready app that can be installed from browser.
</objective>

<execution_context>
@/home/[USER]/.claude/get-shit-done/workflows/execute-plan.md
@/home/[USER]/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/07-mobile-ux-polish/07-CONTEXT.md
@.planning/phases/07-mobile-ux-polish/07-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Create manifest.json</name>
  <files>src/FamilyCoordinationApp/wwwroot/manifest.json</files>
  <action>
    Create manifest.json with:
    - name: "Family Coordination"
    - short_name: "Family"
    - start_url: "/"
    - display: "standalone"
    - background_color: "#1e1e1e" (dark theme)
    - theme_color: "#1e1e1e"
    - icons array with 192x192 and 512x512 references
  </action>
  <verify>File exists with valid JSON structure</verify>
  <done>manifest.json created with app metadata</done>
</task>

<task type="auto">
  <name>Create service worker</name>
  <files>src/FamilyCoordinationApp/wwwroot/service-worker.js</files>
  <action>
    Create service-worker.js that:
    - Caches app shell on install (index.html, css, js bundles)
    - Uses cache-first for static assets
    - Uses network-first for _blazor/* endpoints
    - Shows offline fallback when disconnected
    Keep it simple - Blazor Server needs connection anyway.
  </action>
  <verify>File exists with install/fetch event handlers</verify>
  <done>Service worker caches static assets</done>
</task>

<task type="auto">
  <name>Create PWA icons</name>
  <files>src/FamilyCoordinationApp/wwwroot/icons/</files>
  <action>
    Create simple placeholder icons:
    - icon-192.png (192x192)
    - icon-512.png (512x512)
    
    For MVP: Can use a simple solid color square with letter "F" or food emoji.
    Use ImageSharp or manual creation. If complex, create a placeholder script.
    
    Alternative: Download a free food/home icon from an icon library.
  </action>
  <verify>Both icon files exist in wwwroot/icons/</verify>
  <done>PWA icons created</done>
</task>

<task type="auto">
  <name>Link manifest in App.razor</name>
  <files>src/FamilyCoordinationApp/Components/App.razor</files>
  <action>
    Add to head section:
    ```html
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#1e1e1e" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />
    ```
    
    Register service worker:
    ```html
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js');
        }
    </script>
    ```
  </action>
  <verify>Manifest link and service worker registration in App.razor</verify>
  <done>PWA configured in application</done>
</task>

</tasks>

<verification>
Run the app and check:
1. Browser dev tools → Application → Manifest shows app info
2. Browser dev tools → Application → Service Workers shows registered
3. Chrome mobile emulation shows "Install" option in address bar
</verification>

<success_criteria>
- manifest.json has correct app metadata
- Service worker registers and caches static assets
- PWA icons are accessible at /icons/icon-*.png
- App can be "installed" in Chrome dev tools
</success_criteria>

<output>
After completion, create `.planning/phases/07-mobile-ux-polish/07-01-SUMMARY.md`
</output>
