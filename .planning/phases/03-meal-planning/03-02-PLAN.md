---
phase: 03-meal-planning
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/FamilyCoordinationApp/Components/MealPlan/MealSlot.razor
  - src/FamilyCoordinationApp/Components/MealPlan/MealPlanNavigation.razor
autonomous: true

must_haves:
  truths:
    - "MealSlot displays recipe name and image when assigned"
    - "MealSlot displays custom meal name in italic when no recipe"
    - "MealSlot shows add icon when empty"
    - "MealSlot has remove button on hover"
    - "Navigation shows week date range"
    - "Navigation can go to previous/next week"
    - "Navigation can jump to current week"
  artifacts:
    - path: "src/FamilyCoordinationApp/Components/MealPlan/MealSlot.razor"
      provides: "Single meal slot display component"
      min_lines: 50
    - path: "src/FamilyCoordinationApp/Components/MealPlan/MealPlanNavigation.razor"
      provides: "Week navigation with prev/next buttons"
      min_lines: 30
  key_links:
    - from: "src/FamilyCoordinationApp/Components/MealPlan/MealSlot.razor"
      to: "MealPlanEntry"
      via: "Parameter binding"
      pattern: "\\[Parameter\\].*MealPlanEntry"
    - from: "src/FamilyCoordinationApp/Components/MealPlan/MealPlanNavigation.razor"
      to: "Parent component"
      via: "Two-way binding"
      pattern: "EventCallback<DateOnly>.*WeekStartDateChanged"
---

<objective>
Create reusable MealSlot and MealPlanNavigation components for the meal plan UI.

Purpose: Shared building blocks used by both desktop (calendar) and mobile (list) views. MealSlot displays a single meal entry, MealPlanNavigation handles week switching.

Output: Two Blazor components in Components/MealPlan/ directory ready for use in view components.
</objective>

<execution_context>
@/home/[USER]/.claude/get-shit-done/workflows/execute-plan.md
@/home/[USER]/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-meal-planning/03-RESEARCH.md

# UI pattern reference
@src/FamilyCoordinationApp/Components/Recipe/RecipeCard.razor

# Data entities
@src/FamilyCoordinationApp/Data/Entities/MealPlanEntry.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MealSlot component for displaying individual meal entries</name>
  <files>src/FamilyCoordinationApp/Components/MealPlan/MealSlot.razor</files>
  <action>
Create MealSlot.razor in new Components/MealPlan/ directory:

**Parameters:**
- `DateOnly Date` - The date this slot represents
- `MealType MealType` - Breakfast/Lunch/Dinner
- `MealPlanEntry? Entry` - The meal entry (null if empty slot)
- `EventCallback OnClick` - Triggered when slot is clicked (to open picker)
- `EventCallback OnRemove` - Triggered when remove button clicked
- `EventCallback OnViewRecipe` - Triggered when recipe name clicked (to view details)

**Layout (MudPaper container):**
1. **When Entry is null (empty slot):**
   - Show dashed border (2px dashed var(--mud-palette-lines-default))
   - Center a MudIcon with Add icon, Color.Secondary
   - Min-height 80px

2. **When Entry has Recipe:**
   - Show recipe image (small thumbnail, 60px height) if ImagePath exists
   - Show recipe name (MudText Typo.body2, clickable for OnViewRecipe)
   - Show remove button (MudIconButton, Icons.Material.Filled.Close, position absolute top-right)
   - Remove button hidden by default, visible on hover (CSS .meal-slot:hover .slot-remove)

3. **When Entry has CustomMealName (no Recipe):**
   - Show custom meal name in italic (font-style: italic), Color.Secondary
   - Show remove button same as above
   - No image

**Styling:**
- cursor: pointer on the slot
- Hover: background-color changes (var(--mud-palette-action-default-hover))
- Elevation: 2 when filled, 0 when empty
- Use stopPropagation on remove button click to prevent slot click

Reference existing RecipeCard.razor for MudBlazor patterns.
  </action>
  <verify>
Build succeeds: `dotnet build src/FamilyCoordinationApp`
File exists at src/FamilyCoordinationApp/Components/MealPlan/MealSlot.razor
  </verify>
  <done>
MealSlot component renders differently for empty/recipe/custom states with proper click handlers
  </done>
</task>

<task type="auto">
  <name>Task 2: Create MealPlanNavigation component for week switching</name>
  <files>src/FamilyCoordinationApp/Components/MealPlan/MealPlanNavigation.razor</files>
  <action>
Create MealPlanNavigation.razor:

**Parameters (two-way binding pattern):**
- `DateOnly WeekStartDate` - Current week start (Monday)
- `EventCallback<DateOnly> WeekStartDateChanged` - Callback for changing week

**Layout:**
1. Horizontal flex container with justify-space-between and align-center
2. Left: MudIconButton with ChevronLeft, OnClick PreviousWeek
3. Center:
   - MudText Typo.h5 showing date range: "Jan 20 - Jan 26, 2026" format
   - If current week, show MudChip "This Week" below (Size.Small, Color.Primary)
4. Right: MudIconButton with ChevronRight, OnClick NextWeek
5. Below: MudButton with Today icon, Variant.Text, OnClick GoToToday
   - Disabled when already on current week

**Logic:**
- PreviousWeek: Invoke WeekStartDateChanged with WeekStartDate.AddDays(-7)
- NextWeek: Invoke WeekStartDateChanged with WeekStartDate.AddDays(7)
- GoToToday: Calculate current week's Monday, invoke WeekStartDateChanged
- IsCurrentWeek: Compare WeekStartDate with today's week start

**Week start calculation (inline):**
```csharp
private DateOnly GetWeekStart(DateOnly date)
{
    var diff = (7 + (date.DayOfWeek - DayOfWeek.Monday)) % 7;
    return date.AddDays(-diff);
}
```

**Date format:** Use .ToString("MMM d") for start, .ToString("MMM d, yyyy") for end
  </action>
  <verify>
Build succeeds: `dotnet build src/FamilyCoordinationApp`
File exists at src/FamilyCoordinationApp/Components/MealPlan/MealPlanNavigation.razor
  </verify>
  <done>
Navigation component shows week range, prev/next buttons work, Today button jumps to current week
  </done>
</task>

</tasks>

<verification>
1. `dotnet build src/FamilyCoordinationApp` succeeds
2. Both files exist in Components/MealPlan/
3. MealSlot has three display states (empty, recipe, custom)
4. MealPlanNavigation has two-way binding for WeekStartDate
</verification>

<success_criteria>
- MealSlot.razor exists with Date, MealType, Entry parameters and OnClick, OnRemove, OnViewRecipe callbacks
- MealPlanNavigation.razor exists with WeekStartDate two-way binding
- Both components use MudBlazor components consistently
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-meal-planning/03-02-SUMMARY.md`
</output>
